import{isEncodedDataUrl,isSvgDataUrl,validateContent}from"./validate";const ioniconContent=new Map,requests=new Map;let parser;const getSvgContent=(t,n)=>{let e=requests.get(t);if(!e){if("undefined"==typeof fetch||"undefined"==typeof document)return ioniconContent.set(t,""),Promise.resolve();if(isSvgDataUrl(t)&&isEncodedDataUrl(t)){const r=(parser=parser||new DOMParser).parseFromString(t,"text/html");var o=r.querySelector("svg");return o&&ioniconContent.set(t,o.outerHTML),Promise.resolve()}e=fetch(t).then(e=>{if(e.ok)return e.text().then(e=>{e&&!1!==n&&(e=validateContent(e)),ioniconContent.set(t,e||"")});ioniconContent.set(t,"")}),requests.set(t,e)}return e};export{ioniconContent,getSvgContent};